<!DOCTYPE html> <html><head>
		<title>Guide to Slurm and the PACE cluster</title>
		<base href="./">
		<meta id="root-path" root-path="./">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="- - Guide to Slurm and the PACE cluster">
		<meta property="og:title" content="Guide to Slurm and the PACE cluster">
		<meta property="og:description" content="- - Guide to Slurm and the PACE cluster">
		<meta property="og:type" content="website">
		<meta property="og:url" content="guide-to-slurm-and-the-pace-cluster.html">
		<meta property="og:image" content="attachments\pasted-image-20240413210929.png">
		<meta property="og:site_name" content="-">
		<meta name="author" content="Moises Andrade"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript></head><body class="publish css-settings-manager show-inline-title show-ribbon theme-dark"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles">mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mn{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c33::before{padding:.665em .5em .022em 0;content:"3"}</style><pre class="frontmatter language-yaml" tabindex="0" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">title</span><span class="token punctuation">:</span> Guide to Slurm and the PACE cluster
<span class="token key atrule">author</span><span class="token punctuation">:</span> Moises Andrade
<span class="token key atrule">year</span><span class="token punctuation">:</span> <span class="token number">2024</span></code><button class="copy-code-button">Copy</button></pre><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="Guide to Slurm and the PACE cluster"><p dir="auto">Guide to Slurm and the PACE cluster</p></h1><div><p dir="auto"><em>Author: Moises Andrade</em></p></div><div><p dir="auto">PACE is a remote cluster of machines, using the <a data-tooltip-position="top" aria-label="https://slurm.schedmd.com/documentation.html" rel="noopener" class="external-link" href="https://slurm.schedmd.com/documentation.html" target="_blank">slurm</a> system to allocate resources (CPUs, GPUs, memory, etc) and schedule jobs (e.g.: a <code>train.sh</code> script). This means that most of the workflow requires a secure (ssh) connection and is done via the terminal. </p></div><div><p dir="auto">The core sections are <a data-tooltip-position="top" aria-label="1) Connecting to PACE" data-href="#1) Connecting to PACE" href="#1)_Connecting_to_PACE" class="internal-link" target="_self" rel="noopener">(1)</a>, <a data-tooltip-position="top" aria-label="2) Using the scratch directory (IMPORTANT)" data-href="#2) Using the scratch directory (IMPORTANT)" href="#2)_Using_the_scratch_directory_(IMPORTANT)" class="internal-link" target="_self" rel="noopener">(2)</a> and <a data-tooltip-position="top" aria-label="3) SLURM and Workflow in PACE" data-href="#3) SLURM and Workflow in PACE" href="#3)_SLURM_and_Workflow_in_PACE" class="internal-link" target="_self" rel="noopener">(3)</a>, containing instructions to:</p></div><div><ol>
<li data-line="0" dir="auto">Connect to PACE via the terminal and <code>VSCode</code> ssh extension.</li>
<li data-line="1" dir="auto">Find/create the <code>scratch</code> directory to store large files and install python packages/environments to avoid issues with storage quota.</li>
<li data-line="2" dir="auto">A step-by-step example of a typical workflow in <code>slurm</code> considering an interactive job, creation of Python environments in <code>scratch</code>, installation of packages, and elucidation on typical <code>slurm</code> terms and options.</li>
</ol></div><div><p dir="auto">Additionally, see:</p></div><div><ul>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="4) Cleaning space if quota exceeded" data-href="#4) Cleaning space if quota exceeded" href="#4)_Cleaning_space_if_quota_exceeded" class="internal-link" target="_self" rel="noopener">(4)</a> to troubleshoot storage quota issues; <a data-tooltip-position="top" aria-label="5) Summary of commonly used SLURM commands" data-href="#5) Summary of commonly used SLURM commands" href="#5)_Summary_of_commonly_used_SLURM_commands" class="internal-link" target="_self" rel="noopener">(5)</a> for a list of commonly used <code>slurm</code> commands; <a data-tooltip-position="top" aria-label="6) Submitting batch jobs" data-href="#6) Submitting batch jobs" href="#6)_Submitting_batch_jobs" class="internal-link" target="_self" rel="noopener">(6)</a> to submit <strong>batch</strong> jobs for more compute-intense applications; <a data-tooltip-position="top" aria-label="7) Useful links" data-href="#7) Useful links" href="#7)_Useful_links" class="internal-link" target="_self" rel="noopener">(7)</a> for useful links/references; <a data-tooltip-position="top" aria-label="8) ICE Open OnDemand." data-href="#8) ICE Open OnDemand." href="#8)_ICE_Open_OnDemand." class="internal-link" target="_self" rel="noopener">(8)</a> to use the visual interface provided by ICE Open OnDemand.``</li>
</ul></div><div><p dir="auto">* ICE offers a visual interface alternative via Open OnDemand , but I'd still recommend using the terminal and VSCode. It is pretty convenient once you get used to it, visual interfaces are not available for all <code>slurm</code>-based clusters, and terminal instructions will be needed anyway for batch jobs, conda installation, etc.</p></div><div class="heading-wrapper"><h1 data-heading="1) Connecting to PACE" dir="auto" class="heading" id="1)_Connecting_to_PACE">1) Connecting to PACE</h1><div class="heading-children"><div><p dir="auto">For any of the following, first connect to GT VPN via GlobalProtect.  This <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0026837" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0026837" target="_blank">link</a>has instructions and links to download specific software to connect to VPN</p></div><div class="heading-wrapper"><h2 data-heading="Connecting to PACE via terminal" dir="auto" class="heading" id="Connecting_to_PACE_via_terminal"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Connecting to PACE via terminal</h2><div class="heading-children"><div><ol>
<li data-line="0" dir="auto">Use the following command to connect to PACE via <code>ssh</code>. This will ask for a password. Use same you used to login into canvas, BuzzPort, etc.</li>
</ol></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">ssh</span> <span class="token operator">&lt;</span>gtid<span class="token operator">&gt;</span>@login-<span class="token operator">&lt;</span>cluster<span class="token operator">&gt;</span>.pace.gatech.edu

<span class="token comment"># Example:</span>
<span class="token function">ssh</span> mandrade9@login-ice.pace.gatech.edu
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">If you are not familiar with ssh and want to learn more, there are plenty of good tutorials on the web (<a data-tooltip-position="top" aria-label="https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys" rel="noopener" class="external-link" href="https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys" target="_blank">example</a>)</p></div><div><p dir="auto">You can proceed to (2) for the slurm workflow. The following two sections are optional (though highly recommended)</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Passwordless SSH Connection (Optional)" dir="auto" class="heading" id="Passwordless_SSH_Connection_(Optional)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Passwordless SSH Connection (Optional)</h2><div class="heading-children"><div><p dir="auto">Follow the steps below to avoid entering a password every time you run the <code>ssh</code> command or connect via <code>VSCode</code> <code>ssh</code> extension. These steps should work for Linux, MAC and Windows (use PowerShell or the <a data-tooltip-position="top" aria-label="https://apps.microsoft.com/detail/9n0dx20hk701?rtc=1&amp;hl=en-us&amp;gl=US" rel="noopener" class="external-link" href="https://apps.microsoft.com/detail/9n0dx20hk701?rtc=1&amp;hl=en-us&amp;gl=US" target="_blank">Terminal</a> app).</p></div><div><ol>
<li data-line="0" dir="auto">Generate an SSH key. This will ask for a location, passphrase, etc. You can just press enter; no need to input anything.  </li>
</ol></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">ssh-keygen -t rsa
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">The following two steps will ask for a password; use the same you use in Buzzport.  </p></div><div><ol start="2">
<li data-line="0" dir="auto">Create a directory in the remote machine to hold ssh keys  </li>
</ol></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">ssh</span> mandrade9@login-ice.pace.gatech.edu <span class="token function">mkdir</span> -p .ssh
</code><button class="copy-code-button">Copy</button></pre></div><div><ol start="3">
<li data-line="0" dir="auto">Append the <code>ssh</code> key from local machine to the remote machine authorized keys  </li>
</ol></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">cat</span> .ssh/id_rsa.pub <span class="token operator">|</span> <span class="token function">ssh</span> mandrade@mandrade9@login-ice.pace.gatech.edu <span class="token string">'cat &gt;&gt; .ssh/authorized_keys'</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Connecting to PACE via VSCode (Optional)" dir="auto" class="heading" id="Connecting_to_PACE_via_VSCode_(Optional)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Connecting to PACE via VSCode (Optional)</h2><div class="heading-children"><div><p dir="auto">Connecting to PACE via VSCode is recommended if you use the IDE. It gives an experience similar as if you were coding in your local machine, and provides the convenient features from VSCode such as code highlighting, a visual file explorer, integrated terminal sessions pointing to multiple nodes, etc.</p></div><div><p dir="auto"><strong>NOTE</strong>: before connecting via VSCode, <strong>ensure you are connected to GT VPN.</strong></p></div><div><p dir="auto">To connect with VSCode:</p></div><div><ol>
<li data-line="0" dir="auto">Search for <code>ssh</code> in the <code>extensions</code> window and download this extension:</li>
</ol></div><div><p dir="auto"><span alt="Pasted image 20240413210929.png" src="Pasted image 20240413210929.png" class="internal-embed media-embed image-embed is-loaded" style="width: 500px; max-width: 100%;"><img alt="Pasted image 20240413210929.png" src="attachments/pasted-image-20240413210929.png" style="width: 500px; max-width: 100%;"></span></p></div><div><ol start="2">
<li data-line="0" dir="auto">
<p>Open the command pallet (windows: <code>ctrl+shift+p</code>, MAC <code>command+shif+p</code>) and type <code>ssh</code>. Select the option <em>Remote-SSH:Connect to Host...</em></p>
</li>
<li data-line="2" dir="auto">
<p>Select <code>Add New SSH Host...</code> then type the same command you would use in the terminal:  <code>ssh mandrade9@login-ice.pace.gatech.edu</code></p>
</li>
<li data-line="4" dir="auto">
<p>Enter your password (the same you use for canvas, buzzport, etc)</p>
</li>
<li data-line="6" dir="auto">
<p>A new VSCode window like below should appear. The <code>ssh: login-ice.pace.gatech.edu</code> in the left corner indicates you are connected to PACE.</p>
</li>
</ol></div><div><p dir="auto"><span alt="Pasted image 20240413211530.png" src="Pasted image 20240413211530.png" class="internal-embed media-embed image-embed is-loaded" style="width: 400px; max-width: 100%;"><img alt="Pasted image 20240413211530.png" src="attachments/pasted-image-20240413211530.png" style="width: 400px; max-width: 100%;"></span></p></div><div><p dir="auto">The next time you try to connect as in (2), you will see something like below. That is, you don't need to enter <code>ssh ...</code> again. VSCode saves the ssh configurations for you.<br>
<span alt="Pasted image 20240413212515.png" src="Pasted image 20240413212515.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20240413212515.png" src="attachments/pasted-image-20240413212515.png"></span></p></div><div><p dir="auto">(to check/change ssh configurations: command pallet + <em>Remote-SSH:Open SSH Configuration File</em>)</p></div><div class="heading-wrapper"><h3 data-heading="Useful features:" dir="auto" class="heading" id="Useful_features:"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Useful features:</h3><div class="heading-children"><div><p dir="auto">Two simple examples of convenient features of connecting via VSCode  </p></div><div><p dir="auto"><strong>One SSH, Multiple terminals</strong><br>
Using VSCode's integrated terminal, you can have multiple terminals pointing to different PACE nodes, with no need to <code>ssh</code> again. For instance, below one terminal points to an allocated node with GPU (left) and to the login node (right) (see <strong>Workflow in PACE</strong> to understand the difference)<br>
<span alt="Pasted image 20240413211929.png" src="Pasted image 20240413211929.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20240413211929.png" src="attachments/pasted-image-20240413211929.png"></span></p></div><div><p dir="auto"><strong>GUI-based file navigation</strong>.<br>
Clicking <code>Open Folder</code> to set the folder VSCode points gives a visual explorer of the folder selected, similar as in your local computer. For instance, the below will update the file explorer to show only the folders at the <code>DL</code> directory and make it my working directory.</p></div><div><p dir="auto"><span alt="Pasted image 20240413211651.png" src="Pasted image 20240413211651.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20240413211651.png" src="attachments/pasted-image-20240413211651.png"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="Troubleshooting" dir="auto" class="heading" id="Troubleshooting"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Troubleshooting</h3><div class="heading-children"><div><p dir="auto">When first connecting, you might face the error <strong>"VSCode Server could not be installed..."</strong>. This can be caused by insufficient storage space for VSCode Server to install the necessary archives in your PACE home folder. </p></div><div><p dir="auto">To resolve this, see <em>Cleaning space if you run out of storage</em> and <em>What is the scratch folder and why use it</em></p></div></div></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="2) Using the scratch directory (IMPORTANT)" dir="auto" class="heading" id="2)_Using_the_scratch_directory_(IMPORTANT)">2) Using the scratch directory (IMPORTANT)</h1><div class="heading-children"><div><p dir="auto"><strong>TLDR</strong>: make sure to always download models, big files and <strong>install python packages</strong> (including virtual environments) in your <code>scratch</code> directory.</p></div><div><p dir="auto">Before installing Python packages, it's important to understand some details about PACE's file system and storage. Otherwise, you may face storage quota issues, be unable to create new files, and have your workflow completely disrupted.</p></div><div><p dir="auto">When you connect to PACE, you'll land on the <strong>home directory,</strong> which looks like below. Note these folders are available through any node.</p></div><div><p dir="auto"><span alt="Pasted image 20240413195502.png" src="Pasted image 20240413195502.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20240413195502.png" src="attachments/pasted-image-20240413195502.png"></span></p></div><div><p dir="auto">In PACE, you have <strong>only 15GB of storage in the home directory and all of its subdirectories, except for</strong>  <code>scratch</code>. In the <code>scratch</code> folder you have 300GB. See <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042094" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042094" target="_blank">here</a> for more details. </p></div><div><ul>
<li data-line="0" dir="auto">Note from the link: <code>scratch</code> is not backed up, and at the end of each semester, all files in <code>scratch</code> not touched in 120 days are deleted.</li>
</ul></div><div><p dir="auto">This means I'd exceed the storage quota and be unable to create any other file (and to work) if I download a big model to the <code>DL</code> folder, or run <code>pip3 install pytorch</code> a couple times, since by default package managers will not use the <code>scratch</code> directory.</p></div><div class="heading-wrapper"><h3 data-heading="Find/Create the scratch directory" dir="auto" class="heading" id="Find/Create_the_scratch_directory"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Find/Create the scratch directory</h3><div class="heading-children"><div><p dir="auto">Use <code>pace-quota</code> to find the location of your scratch directory</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token punctuation">[</span>mandrade9@login-ice-3 ~<span class="token punctuation">]</span>$ pace-quota

<span class="token comment"># Output:</span>
<span class="token comment"># Filesystem                                             Usage (GB)    Limit</span>
<span class="token comment"># Home:/home/hice1/mandrade9                                   21.3     30.0  70.9%</span>
<span class="token comment"># Scratch:/storage/ice1/9/2/mandrade9                          50.7    300.0  16.9%</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">You can create a <code>scratch</code> folder in your home directory and link it to the path above.</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">mkdir</span> ~/scratch 
<span class="token function">ln</span> -s /storage/ice1/9/2/mandrade9 ~/scratch
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">Now use <code>~scratch</code> or <code>/storage/ice1/9/2/mandrade9</code> to store big files and install python environments.</p></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="3) SLURM and Workflow in PACE" dir="auto" class="heading" id="3)_SLURM_and_Workflow_in_PACE">3) SLURM and Workflow in PACE</h1><div class="heading-children"><div><p dir="auto">PACE's use the <a data-tooltip-position="top" aria-label="https://slurm.schedmd.com/documentation.html" rel="noopener" class="external-link" href="https://slurm.schedmd.com/documentation.html" target="_blank">slurm</a>  system to allocate resources (CPUs, GPUs, etc) and schedule jobs (e.g.: a <code>train.sh</code> script). </p></div><div><p dir="auto">The typical <code>slurm</code> workflow goes as follows: </p></div><div><ol>
<li data-line="0" dir="auto">
<p><code>ssh</code> into PACE (as in (1)) -&gt; request an interactive computing node -&gt; load necessary software ('modules') -&gt; run your code</p>
</li>
<li data-line="2" dir="auto">
<p><code>ssh</code> into PACE, queue (batch) jobs to computing nodes.</p>
</li>
</ol></div><div><p dir="auto">Translation:</p></div><div><ul>
<li data-line="0" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p>Interactive node: this gives you access to a machine (via terminal) to run commands on the fly. </p>
<ul>
<li data-line="1" dir="auto">Example, you can run <code>python gen_images.py</code>, see the results in your terminal / folders, change code, run again</li>
</ul>
</li>
<li data-line="3" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p>Queue batch jobs: put a script on a queue to be executed by <code>slurm</code> when resources are available.</p>
<ul>
<li data-line="4" dir="auto">Example: schedule a <code>train.sh</code> script to run. You don't interact with the terminal here; results will be available in log files /folders you specify.</li>
<li data-line="5" dir="auto">This is useful when more time/resources are needed. See <a data-tooltip-position="top" aria-label="6) Submitting batch jobs" data-href="#6) Submitting batch jobs" href="#6)_Submitting_batch_jobs" class="internal-link" target="_self" rel="noopener">(6)</a> for more.</li>
</ul>
</li>
</ul></div><div><p dir="auto">Below section describes case (1), specifically <strong>how to install packages and run python using anaconda and the scratch folder</strong>. Nonetheless, even if you using batch jobs, it is useful to read the below for the initial setup and get used to the workflow.</p></div><div class="heading-wrapper"><h2 data-heading="1) Requesting an interactive node" dir="auto" class="heading" id="1)_Requesting_an_interactive_node"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>1) Requesting an interactive node</h2><div class="heading-children"><div><p dir="auto">When you log into PACE, you will receive a terminal pointing to a "<strong>login node</strong>", like below:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">~ <span class="token function">ssh</span> mandrade9@login-ice.pace.gatech.edu
<span class="token punctuation">[</span>mandrade9@login-ice-3 ~<span class="token punctuation">]</span>$
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">The login node has little not computing power and is accessed by many people at once. <strong>You should not execute heavy programs on it, or else performance for all users may be affected!</strong> </p></div><div><p dir="auto">To run heavy programs, you should request a <em>computing node</em>, like below:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">salloc -N1 -t0:15:00 --cpus-per-task <span class="token number">8</span> --ntasks-per-node<span class="token operator">=</span><span class="token number">1</span> --gres<span class="token operator">=</span>gpu:V100:2 --mem-per-gpu<span class="token operator">=</span>32G
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">In this example, I requested:</p></div><div><ul>
<li data-line="0" dir="auto">one computing node (<code>-N1</code> )</li>
<li data-line="1" dir="auto">for 15 minutes (<code>-t0:15:00</code>)</li>
<li data-line="2" dir="auto">With 8 CPU cores (<code>--cpus-per-task</code>)</li>
<li data-line="3" dir="auto">With two V100 GPUs (<code>--gres=gpu:V100:2</code>), with 32GB of memory each (<code>--mem-per-gpu=32G</code>)</li>
</ul></div><div><p dir="auto">Notes:</p></div><div><ul>
<li data-line="0" dir="auto">check hardware available to request <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042095" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042095" target="_blank">here</a>; details on <code>slurm</code> options <a data-tooltip-position="top" aria-label="https://login.scg.stanford.edu/faqs/cores/" rel="noopener" class="external-link" href="https://login.scg.stanford.edu/faqs/cores/" target="_blank">here</a>,<a data-tooltip-position="top" aria-label="https://researchcomputing.princeton.edu/support/knowledge-base/scaling-analysis" rel="noopener" class="external-link" href="https://researchcomputing.princeton.edu/support/knowledge-base/scaling-analysis" target="_blank">here</a>.    </li>
<li data-line="1" dir="auto">For simpler use cases, you will mostly tweak the GPU and CPU specs relative to the command above.    </li>
<li data-line="2" dir="auto">For more compute-intense jobs, you may want a distributed and multi-GPU solution, which requires more tweaking. Check this <a data-tooltip-position="top" aria-label="https://github.com/PrincetonUniversity/multi_gpu_training/tree/main/02_pytorch_ddp" rel="noopener" class="external-link" href="https://github.com/PrincetonUniversity/multi_gpu_training/tree/main/02_pytorch_ddp" target="_blank">guide</a> on PyTorch DDP with <code>slurm</code>.</li>
</ul></div><div><p dir="auto">The terminal should point to a computing node now, like below.</p></div><div><p dir="auto"><span alt="Pasted image 20240413193814.png" src="Pasted image 20240413193814.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20240413193814.png" src="attachments/pasted-image-20240413193814.png"></span></p></div><div><p dir="auto">This means you have access to a machine with the specs above. Executing <code>nvidia-smi</code> you can confirm details of the GPUs provided:</p></div><div><p dir="auto"><span alt="Pasted image 20240413193925.png" src="Pasted image 20240413193925.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20240413193925.png" src="attachments/pasted-image-20240413193925.png"></span></p></div></div></div><div class="heading-wrapper"><h2 data-heading="2) Loading software/modules" dir="auto" class="heading" id="2)_Loading_software/modules"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>2) Loading software/modules</h2><div class="heading-children"><div><p dir="auto">The computing nodes initializes with the bare minimum of software. You have to load them to do any work.</p></div><div><p dir="auto">PACE has commonly used programs pre-installed. You can "load" these modules via the command:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">module load <span class="token operator">&lt;</span>module_name<span class="token operator">&gt;</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">To find which software is available and their identifiers, use the <code>spider</code> command:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">module spider <span class="token operator">&lt;</span>partial_module_name<span class="token operator">&gt;</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">For example, to see which versions of <code>anaconda</code> are available:</p></div><div><p dir="auto"><span alt="Pasted image 20240413194508.png" src="Pasted image 20240413194508.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20240413194508.png" src="attachments/pasted-image-20240413194508.png"></span></p></div><div><p dir="auto">This tells that I can load <code>anaconda</code> via:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">module load anaconda3/2022.05.0.1
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><strong>NOTE:  software versions are not the same among PACE nodes.</strong> </p></div><div><ul>
<li data-line="0" dir="auto">For instance, if you request a <code>A100 GPU</code> you may receive a  node with only <code>conda</code> versions 2023+</li>
<li data-line="1" dir="auto">This gives a little headache when using different nodes, which is not so rare, as not always the same nodes are available. </li>
<li data-line="2" dir="auto">For <code>anaconda</code> in particular, I tend to create one environment for each node to avoid problems.</li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="3) Creating a virtual environment in the scratch directory and installing python packages" dir="auto" class="heading" id="3)_Creating_a_virtual_environment_in_the_scratch_directory_and_installing_python_packages"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>3) Creating a virtual environment in the scratch directory and installing python packages</h2><div class="heading-children"><div><ol>
<li data-line="0" dir="auto">Load the anaconda module </li>
</ol></div><div><pre><code>module load anaconda3/2022.05.0.1
</code><button class="copy-code-button">Copy</button></pre></div><div><ol start="2">
<li data-line="0" dir="auto">Create the virtual environment <strong>in your scratch directory</strong> and activate it. </li>
</ol></div><div><p dir="auto">Obs.: Do not continue if you don't know what is the <code>scratch</code> directory. Go to <a data-tooltip-position="top" aria-label="2) Using the scratch directory (IMPORTANT)" data-href="#2) Using the scratch directory (IMPORTANT)" href="#2)_Using_the_scratch_directory_(IMPORTANT)" class="internal-link" target="_self" rel="noopener">(2)</a> first.</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">conda create --prefix ~/scratch/<span class="token operator">&lt;</span>envName<span class="token operator">&gt;</span> <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token operator">&lt;</span><span class="token number">3</span>.x<span class="token operator">&gt;</span>
conda activate ~/scratch/<span class="token operator">&lt;</span>envName<span class="token operator">&gt;</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">All environment files will be saved in <code>~/scratch/&lt;envName&gt;</code> instead of the default directory <code>~/.conda</code></p></div><div><p dir="auto">Alternatively, you can set as <code>conda</code> default to store packages in specific directories inside <code>scratch</code> with the commands below. <code>config</code>  will  add the paths to the <code>~./condarc</code> file and you don't need to run it again.</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token comment"># Change conda default path to save env files</span>
conda config --add envs_dirs ~/scratch/conda_venvs
conda config --add pkgs_dirs ~/scratch/conda_pkgs

<span class="token comment"># Create environment</span>
conda create -n vlm <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.11</span> 
conda activate vlm
</code><button class="copy-code-button">Copy</button></pre></div><div><ol start="3">
<li data-line="0" dir="auto">Install your packages. </li>
</ol></div><div><p dir="auto">Typical packages</p></div><div><pre><code>pip3 install numpy
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">For <code>PyTorch</code>, there is one additional step:</p></div><div><p dir="auto">(i) Check and load <code>CUDA</code> module:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">module spider cuda 
<span class="token comment"># Output: [...]</span>
<span class="token comment"># Versions: # cuda/11.8.0 # cuda/12.1.1 </span>
module load cuda/11.8.0
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">(ii) Check <a data-tooltip-position="top" aria-label="https://pytorch.org/get-started/locally/" rel="noopener" class="external-link" href="https://pytorch.org/get-started/locally/" target="_blank">Pytorch's website</a> for the appropriate command. In this case (Linux, Pip, CUDA11.8):</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">pip3 <span class="token function">install</span> torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><strong>NOTES</strong></p></div><div><p dir="auto">(i) You can confirm CUDA is loaded and it's version with <code>nvcc --version</code></p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">nvcc --version
<span class="token comment"># nvcc: NVIDIA (R) Cuda compiler driver</span>
<span class="token comment"># Copyright (c) 2005-2022 NVIDIA Corporation</span>
<span class="token comment"># Built on Wed_Sep_21_10:33:58_PDT_2022</span>
<span class="token comment"># Cuda compilation tools, release 11.8, V11.8.89</span>
<span class="token comment"># Build cuda_11.8.r11.8/compiler.31833905_0</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul>
<li data-line="0" dir="auto">You can also use Python to check CUDA and GPU availability:</li>
</ul></div><div><pre class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">import</span> torch
torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># True if any CUDA device ready for use</span>
<span class="token comment"># &gt; True</span>
torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>device_count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Number of CUDA devices ready for use</span>
<span class="token comment"># &gt; 2</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">(ii) I tend to use pip3; using <code>conda</code> in <code>slurm</code> caused bugs for me in the past.</p></div><div><p dir="auto">(iii) It is good to check if <code>pip</code> is pointing to scratch folder with <code>which pip3</code> before installing anything. If it is not, check the troubleshooting section below</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">$ <span class="token function">which</span> pip3
~/scratch/VLM_project/bin/pip
</code><button class="copy-code-button">Copy</button></pre></div><div class="heading-wrapper"><h3 data-heading="Troubleshooting" dir="auto" class="heading" id="Troubleshooting"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Troubleshooting</h3><div class="heading-children"><div><p dir="auto">Sometimes <code>slurm</code> messes up the venv locations. If <code>pip3</code> does not point to <code>scratch</code>, try activating and deactivating the environment and/or reload the anaconda module:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token comment"># activate and deactivate the env</span>
conda deactivate
conda activate /home/hice1/mandrade9/scratch/VLM_project
<span class="token function">which</span> pip3 

<span class="token comment"># and/or unload and load the module again</span>
module unload anaconda3/2022.05.0.1
module load anaconda3/2022.05.0.1
conda deactivate
conda activate
<span class="token comment"># Sometimes anaconda is loaded automatically in the node; deactivating and activating can avoid some bugs </span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul>
<li data-line="0" dir="auto">If still not pointing to scratch, the safest way to avoid problems is deleting the environment and reloading <code>conda</code>. Then creating the environment again following 1-2</li>
</ul></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">conda deactivate
conda remove --name /home/hice1/mandrade9/scratch/DL_project --all
module purge 
<span class="token comment"># (this will remove all modules loaded; just to be sure)</span>
module load anaconda3/2022.05.0.1
conda deactivate
conda activate
</code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="4) Cleaning space if quota exceeded" dir="auto" class="heading" id="4)_Cleaning_space_if_quota_exceeded">4) Cleaning space if quota exceeded</h1><div class="heading-children"><div><p dir="auto">If you face errors like <code>user quota exceeded</code> or bugs like VSCode refusing to connect due to an error installing VSCode server, this is probably due to exceeding storage quota in PACE.</p></div><div><ul>
<li data-line="0" dir="auto">Read the <a data-href="#2) Using the scratch directory (IMPORTANT)" href="#2)_Using_the_scratch_directory_(IMPORTANT)" class="internal-link" target="_self" rel="noopener">2) Using the scratch directory (IMPORTANT)</a> section!</li>
</ul></div><div><p dir="auto">A first thing you should try is cleaning all <code>conda</code> and <code>pip</code> caches:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">conda remove -n <span class="token operator">&lt;</span>env_name<span class="token operator">&gt;</span> --all  <span class="token comment"># clean a specific environment</span>
conda clean --all <span class="token function">rm</span>              <span class="token comment"># clean all environments</span>
-rf ~/.cache/pip
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">If this doesn't work, you can also delete the whole <code>.conda</code> folder. Don't worry, this will not break anything.</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">rm</span> -r ~/.conda
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">More generally, you can search large files with the command below, and delete them accordingly. This should point out large files in <code>.conda</code> too.</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">find</span> ~ -type f -size +100M
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">For a more compact view, you can check directory sizes with the below command.</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">du</span> <span class="token operator">&lt;</span>directory_path<span class="token operator">&gt;</span> -h --max-depth<span class="token operator">=</span><span class="token number">1</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h1 data-heading="5) Summary of commonly used SLURM commands" dir="auto" class="heading" id="5)_Summary_of_commonly_used_SLURM_commands">5) Summary of commonly used SLURM commands</h1><div class="heading-children"><div><p dir="auto">Check this <a data-tooltip-position="top" aria-label="https://www.carc.usc.edu/user-guides/hpc-systems/using-our-hpc-systems/slurm-cheatsheet" rel="noopener" class="external-link" href="https://www.carc.usc.edu/user-guides/hpc-systems/using-our-hpc-systems/slurm-cheatsheet" target="_blank">cheatsheet</a> and <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042096" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042096" target="_blank">PACE documentation</a> for more commands and instructions.</p></div><div><p dir="auto"><strong>Request interactive node with specific hardware</strong> </p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">salloc -N1 -t0:15:00 --cpus-per-task <span class="token number">8</span> --ntasks-per-node<span class="token operator">=</span><span class="token number">1</span> --gres<span class="token operator">=</span>gpu:V100:2 --mem-per-gpu<span class="token operator">=</span>32G
</code><button class="copy-code-button">Copy</button></pre></div><div><ul>
<li data-line="0" dir="auto">one computing node (<code>-N1</code> )</li>
<li data-line="1" dir="auto">for 15 minutes (<code>-t0:15:00</code>)</li>
<li data-line="2" dir="auto">With 8 CPU cores (<code>--cpus-per-task</code>)</li>
<li data-line="3" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>With two V100 GPUs (<code>--gres=gpu:V100:2</code>), each of which with 32GB of memory (<code>--mem-per-gpu=32G</code>)
<ul>
<li data-line="4" dir="auto">Check hardware available to request <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042095" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042095" target="_blank">here</a>; details on <code>slurm</code> options <a data-tooltip-position="top" aria-label="https://login.scg.stanford.edu/faqs/cores/" rel="noopener" class="external-link" href="https://login.scg.stanford.edu/faqs/cores/" target="_blank">here</a>, <a data-tooltip-position="top" aria-label="https://researchcomputing.princeton.edu/support/knowledge-base/scaling-analysis" rel="noopener" class="external-link" href="https://researchcomputing.princeton.edu/support/knowledge-base/scaling-analysis" target="_blank">here</a>.</li>
<li data-line="5" dir="auto">For distributed and multi-GPU solution, check this <a data-tooltip-position="top" aria-label="https://github.com/PrincetonUniversity/multi_gpu_training/tree/main/02_pytorch_ddp" rel="noopener" class="external-link" href="https://github.com/PrincetonUniversity/multi_gpu_training/tree/main/02_pytorch_ddp" target="_blank">guide</a>on PyTorch DDP with <code>slurm</code> for tweaking the above options appropriately</li>
</ul>
</li>
</ul></div><div><p dir="auto"><strong>Loading software/modules:</strong></p></div><div><p dir="auto">List modules that match a partial name:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">module spider <span class="token operator">&lt;</span>partial module name<span class="token operator">&gt;</span> 
<span class="token comment"># e.g.: module spider anaconda</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">Load, unload, purge modules:</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">module load <span class="token operator">&lt;</span>module_name<span class="token operator">&gt;</span>
module unload <span class="token operator">&lt;</span>module_name<span class="token operator">&gt;</span>
module purge <span class="token comment"># unload all modules</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><strong>Moving data in/out slurm:</strong><br>
Copy local files to slurm</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">scp</span> -r local1 local2 mandrade9@login-ice.pace.gatech.edu:~/scratch/slurm_folder
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">Copy from slurm to local</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">scp</span> -r mandrade9@login-ice.pace.gatech.edu:/home/hice1/mandrade9/scratch/project/data ./local_folder
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><strong>Queue a batch script for execution</strong></p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">sbatch myscript
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><strong>Visualize all queued jobs for a user</strong></p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">squeue -u <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token comment"># e.g.: squeue -u mandrade9</span>
<span class="token comment"># Also:</span>
sacct -u <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>  <span class="token comment"># e.g.: sacct -u mandrade9</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><strong>Cancel a queued job:</strong></p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded">scancel <span class="token operator">&lt;</span>job_id<span class="token operator">&gt;</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h1 data-heading="6) Submitting batch jobs" dir="auto" class="heading" id="6)_Submitting_batch_jobs">6) Submitting batch jobs</h1><div class="heading-children"><div><p dir="auto">For tasks that require more time and compute, you may have to submit jobs for SLURM to allocate resources when they are available. In these cases, the typical workflow is as follow:</p></div><div><ol>
<li data-line="0" dir="auto">write a bash script specifying the resources and how to run your code. A sample script is below.  Notice the first few lines specify the machine specs desired to run the job, similar as when allocating an interactive node.</li>
</ol></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#SBATCH --job-name=my_job             # name for your job</span>
<span class="token comment">#SBATCH --nodes=1                     # number of nodes</span>
<span class="token comment">#SBATCH --ntasks-per-node=1           # number of processes per node</span>
<span class="token comment">#SBATCH --cpus-per-task=64            # number of CPU cores           </span>
<span class="token comment">#SBATCH --time=00:15:00               # total run time limit (HH:MM:SS)      </span>
<span class="token comment">#SBATCH --gres=gpu:V100:1             # one v100 GPU </span>
<span class="token comment">#SBATCH --mem-per-gpu=12G             # 12G of GPU memory</span>
<span class="token comment">#SBATCH -o ./slurm_outs/slurm_%j.out  # file to write logs, prints, etc</span>
<span class="token comment">#SBATCH --mail-type=begin             # send email when job begins</span>
<span class="token comment">#SBATCH --mail-type=end               # send email when job ends</span>

<span class="token comment"># Some code to run, like</span>
module purge
module load anaconda3/2022.05.0.1
conda activate ~./scratch/vlm
srun python3 mycode.py

<span class="token comment"># Or any other thing. Example below runs a OpenMP cpp code:</span>
<span class="token assign-left variable">cores</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1,2</span>,4,8,16,32,64<span class="token punctuation">)</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">OMP_PLACES</span><span class="token operator">=</span>cores
<span class="token keyword">for</span> <span class="token for-or-select variable">c</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">${cores<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>"</span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>base_n <span class="token operator">*</span> c<span class="token variable">))</span></span>
    <span class="token builtin class-name">export</span> <span class="token assign-left variable">OMP_NUM_THREADS</span><span class="token operator">=</span><span class="token variable">$c</span>
    <span class="token comment"># if c is 1, then run the serial version</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$c</span> -eq <span class="token number">1</span> <span class="token punctuation">]</span>
    <span class="token keyword">then</span>
        <span class="token assign-left variable">output</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>./build/serial -n $n -s <span class="token number">1</span> -bs $bs<span class="token variable">)</span></span>
    <span class="token keyword">else</span>
        <span class="token assign-left variable">output</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>./build/openmp -n $n -s <span class="token number">1</span> -bs $bs<span class="token variable">)</span></span>
    <span class="token keyword">fi</span>
    <span class="token assign-left variable">sim_time</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $output <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">' = '</span> <span class="token string">'{print $2}'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1}'</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$n</span>, <span class="token variable">$bs</span>, <span class="token variable">$sim_time</span>, <span class="token variable">$c</span>"</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$filename</span>
<span class="token keyword">done</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ol start="2">
<li data-line="0" dir="auto">Queue the script for execution with the command <code>sbatch myscript</code> . You can run this from the login node.</li>
</ol></div><div><p dir="auto"><strong>NOTE:</strong> different from <code>salloc</code>, you will not receive an interactive terminal to run commands and see outputs on the fly. You can check <code>slurm</code> logs on file/folders specified in <code>#SBATCH -o ./slurm_outs/slurm_%j.out.</code> This is useful to check prints, failures; etc.</p></div><div><p dir="auto">Use the commands below to check queued jobs status, cancel jobs, etc.</p></div><div><pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token comment"># Check job IDs and status </span>
squeue -u <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> 
sacct -u <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> 
<span class="token comment"># Cancel a submitted job </span>
scancel <span class="token operator">&lt;</span>job_id<span class="token operator">&gt;</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h1 data-heading="7) Useful links" dir="auto" class="heading" id="7)_Useful_links">7) Useful links</h1><div class="heading-children"><div><p dir="auto">PACE links:</p></div><div><ul>
<li data-line="0" dir="auto">ICE Hardware information: <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042095" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042095" target="_blank">link</a></li>
<li data-line="1" dir="auto">Software List: <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0041975" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0041975" target="_blank">link</a></li>
<li data-line="2" dir="auto">Using Conda and Anaconda: <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0041621" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0041621" target="_blank">PACE link</a></li>
<li data-line="3" dir="auto">Open On Demand (Web Access): <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042133" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042133" target="_blank">PACE link</a></li>
<li data-line="4" dir="auto">Local Terminal Access: <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042100" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042100" target="_blank">PACE link</a></li>
</ul></div><div><p dir="auto">Using SLURM:</p></div><div><ul>
<li data-line="0" dir="auto">Guides: <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042096#gpu-jobs" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042096#gpu-jobs" target="_blank">PACE link</a> , <a data-tooltip-position="top" aria-label="https://www.carc.usc.edu/user-guides/hpc-systems/using-our-hpc-systems/slurm-cheatsheet" rel="noopener" class="external-link" href="https://www.carc.usc.edu/user-guides/hpc-systems/using-our-hpc-systems/slurm-cheatsheet" target="_blank">USC guide</a></li>
<li data-line="1" dir="auto">srun vs sbatch: <a data-tooltip-position="top" aria-label="https://stackoverflow.com/questions/43767866/slurm-srun-vs-sbatch-and-their-parameters" rel="noopener" class="external-link" href="https://stackoverflow.com/questions/43767866/slurm-srun-vs-sbatch-and-their-parameters" target="_blank">stack overflow</a></li>
<li data-line="2" dir="auto">nodes vs ntasks vs cpus-per-task: <a data-tooltip-position="top" aria-label="https://login.scg.stanford.edu/faqs/cores/" rel="noopener" class="external-link" href="https://login.scg.stanford.edu/faqs/cores/" target="_blank">Stanford FAQ</a>, <a data-tooltip-position="top" aria-label="https://researchcomputing.princeton.edu/support/knowledge-base/scaling-analysis" rel="noopener" class="external-link" href="https://researchcomputing.princeton.edu/support/knowledge-base/scaling-analysis" target="_blank">Princeton Scaling Analysis guide</a></li>
</ul></div><div><p dir="auto"><strong>Useful references if you are dealing with large models </strong></p></div><div><p dir="auto">Multi-GPU training/inference</p></div><div><ul>
<li data-line="0" dir="auto">Princeton guide on DDP with Slurm: <a data-tooltip-position="top" aria-label="https://github.com/PrincetonUniversity/multi_gpu_training/tree/main/02_pytorch_ddp" rel="noopener" class="external-link" href="https://github.com/PrincetonUniversity/multi_gpu_training/tree/main/02_pytorch_ddp" target="_blank">git</a></li>
<li data-line="1" dir="auto">Distributed training paradigms (with code): <a data-tooltip-position="top" aria-label="https://towardsdatascience.com/distributed-parallel-training-data-parallelism-and-model-parallelism-ec2d234e3214" rel="noopener" class="external-link" href="https://towardsdatascience.com/distributed-parallel-training-data-parallelism-and-model-parallelism-ec2d234e3214" target="_blank">link</a>, <a data-tooltip-position="top" aria-label="https://towardsdatascience.com/distributed-parallel-training-model-parallel-training-a768058aa02a" rel="noopener" class="external-link" href="https://towardsdatascience.com/distributed-parallel-training-model-parallel-training-a768058aa02a" target="_blank">link</a></li>
<li data-line="2" dir="auto">PyTorch guide for pipeline parallelism: <a data-tooltip-position="top" aria-label="https://pytorch.org/tutorials/intermediate/pipeline_tutorial.html" rel="noopener" class="external-link" href="https://pytorch.org/tutorials/intermediate/pipeline_tutorial.html" target="_blank">link</a></li>
</ul></div><div><p dir="auto">Quantizing and loading quantized models with <code>trasnformers</code> library: <a data-tooltip-position="top" aria-label="https://medium.com/@sayedebad.777/the-power-of-quantization-in-ml-a-pytorch-tutorial-part-5-204883da375f" rel="noopener" class="external-link" href="https://medium.com/@sayedebad.777/the-power-of-quantization-in-ml-a-pytorch-tutorial-part-5-204883da375f" target="_blank">link</a></p></div></div></div><div class="heading-wrapper"><h1 data-heading="8) ICE Open OnDemand." dir="auto" class="heading" id="8)_ICE_Open_OnDemand.">8) ICE Open OnDemand.</h1><div class="heading-children"><div><p dir="auto">ICE offers a web-based alternative to access PACE machines using a visual interface. The official guide can be found <a data-tooltip-position="top" aria-label="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042133" rel="noopener" class="external-link" href="https://gatech.service-now.com/home?id=kb_article_view&amp;sysparm_article=KB0042133" target="_blank">here</a>. </p></div><div><p dir="auto">Below are some instructions on how to upload files, submit jobs via the terminal, and open VSCode session using this feature.</p></div><div><p dir="auto">Notes:</p></div><div><ul>
<li data-line="0" dir="auto">The same steps outlined in sections (2) and (3) apply to this type of access too. It is just a different interface than your terminal or personal VSCode.</li>
<li data-line="1" dir="auto">This interface offers an alternative (and pretty convenient) way upload and move files compared to <code>scp</code></li>
</ul></div><div><p dir="auto"> For all that follows, access the Open OnDemand dashboard here: <a rel="noopener" class="external-link" href="https://ondemand-ice.pace.gatech.edu/pun/sys/dashboard/" target="_blank">https://ondemand-ice.pace.gatech.edu/pun/sys/dashboard/</a></p></div><div class="heading-wrapper"><h2 data-heading="Upload files" dir="auto" class="heading" id="Upload_files"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Upload files</h2><div class="heading-children"><div><ul>
<li data-line="0" dir="auto">click on <code>files -&gt; home directory</code> and upload your local files with the <code>upload</code> button. </li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Run jobs interactively via Terminal and Desktop app" dir="auto" class="heading" id="Run_jobs_interactively_via_Terminal_and_Desktop_app"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Run jobs interactively via Terminal and Desktop app</h2><div class="heading-children"><div><p dir="auto"><strong>Terminal interface</strong></p></div><div><ol>
<li data-line="0" dir="auto">On the dashboard, click on <code>clusters -&gt; ICE Shell Access</code></li>
</ol></div><div><p dir="auto"><strong>Desktop interface</strong><br>
This provides a desktop-like view with interactive access to the computing node resources (like <code>salloc1</code> but with a desktop too)</p></div><div><ol>
<li data-line="0" dir="auto">On the dashboard, click on <code>clusters -&gt; interactive apps -&gt; interactive Desktop</code></li>
<li data-line="1" dir="auto">Choose the cluster (ICE), and hardware desired for the computing node</li>
<li data-line="2" dir="auto">Click on launch </li>
</ol></div></div></div><div class="heading-wrapper"><h2 data-heading="Run a VSCode session:" dir="auto" class="heading" id="Run_a_VSCode_session:"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Run a VSCode session:</h2><div class="heading-children"><div><p dir="auto">This provides a VSCode session with interactive access to the computing node resources (similar to the <code>ssh</code> via VSCode as in (1))</p></div><div><ol>
<li data-line="0" dir="auto">On the dashboard, click on <code>clusters -&gt; interactive apps -&gt; VS Code</code></li>
<li data-line="1" dir="auto">Choose the cluster (ICE), hardware desired for the computing node, and the modules to load.</li>
<li data-line="2" dir="auto">Click on launch </li>
</ol></div><div class="mod-footer"></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Guide to Slurm and the PACE cluster"><div class="tree-item-contents heading-link" heading-name="Guide to Slurm and the PACE cluster"><span class="tree-item-title">Guide to Slurm and the PACE cluster</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#1)_Connecting_to_PACE"><div class="tree-item-contents heading-link" heading-name="1) Connecting to PACE"><span class="tree-item-title">1. 
Connecting to PACE
</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Connecting_to_PACE_via_terminal"><div class="tree-item-contents heading-link" heading-name="Connecting to PACE via terminal"><span class="tree-item-title">Connecting to PACE via terminal</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Passwordless_SSH_Connection_(Optional)"><div class="tree-item-contents heading-link" heading-name="Passwordless SSH Connection (Optional)"><span class="tree-item-title">Passwordless SSH Connection (Optional)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Connecting_to_PACE_via_VSCode_(Optional)"><div class="tree-item-contents heading-link" heading-name="Connecting to PACE via VSCode (Optional)"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Connecting to PACE via VSCode (Optional)</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Useful_features:"><div class="tree-item-contents heading-link" heading-name="Useful features:"><span class="tree-item-title">Useful features:</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Troubleshooting"><div class="tree-item-contents heading-link" heading-name="Troubleshooting"><span class="tree-item-title">Troubleshooting</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#2)_Using_the_scratch_directory_(IMPORTANT)"><div class="tree-item-contents heading-link" heading-name="2) Using the scratch directory (IMPORTANT)"><span class="tree-item-title">2. 
Using the scratch directory (IMPORTANT)
</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Find/Create_the_scratch_directory"><div class="tree-item-contents heading-link" heading-name="Find/Create the scratch directory"><span class="tree-item-title">Find/Create the scratch directory</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#3)_SLURM_and_Workflow_in_PACE"><div class="tree-item-contents heading-link" heading-name="3) SLURM and Workflow in PACE"><span class="tree-item-title">3. 
SLURM and Workflow in PACE
</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#1)_Requesting_an_interactive_node"><div class="tree-item-contents heading-link" heading-name="1) Requesting an interactive node"><span class="tree-item-title">1. 
Requesting an interactive node
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#2)_Loading_software/modules"><div class="tree-item-contents heading-link" heading-name="2) Loading software/modules"><span class="tree-item-title">2. 
Loading software/modules
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#3)_Creating_a_virtual_environment_in_the_scratch_directory_and_installing_python_packages"><div class="tree-item-contents heading-link" heading-name="3) Creating a virtual environment in the scratch directory and installing python packages"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">3. 
Creating a virtual environment in the scratch directory and installing python packages
</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Troubleshooting"><div class="tree-item-contents heading-link" heading-name="Troubleshooting"><span class="tree-item-title">Troubleshooting</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#4)_Cleaning_space_if_quota_exceeded"><div class="tree-item-contents heading-link" heading-name="4) Cleaning space if quota exceeded"><span class="tree-item-title">4. 
Cleaning space if quota exceeded
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#5)_Summary_of_commonly_used_SLURM_commands"><div class="tree-item-contents heading-link" heading-name="5) Summary of commonly used SLURM commands"><span class="tree-item-title">5. 
Summary of commonly used SLURM commands
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#6)_Submitting_batch_jobs"><div class="tree-item-contents heading-link" heading-name="6) Submitting batch jobs"><span class="tree-item-title">6. 
Submitting batch jobs
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#7)_Useful_links"><div class="tree-item-contents heading-link" heading-name="7) Useful links"><span class="tree-item-title">7. 
Useful links
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#8)_ICE_Open_OnDemand."><div class="tree-item-contents heading-link" heading-name="8) ICE Open OnDemand."><span class="tree-item-title">8. 
ICE Open OnDemand.
</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Upload_files"><div class="tree-item-contents heading-link" heading-name="Upload files"><span class="tree-item-title">Upload files</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Run_jobs_interactively_via_Terminal_and_Desktop_app"><div class="tree-item-contents heading-link" heading-name="Run jobs interactively via Terminal and Desktop app"><span class="tree-item-title">Run jobs interactively via Terminal and Desktop app</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="guide-to-slurm-and-the-pace-cluster.html#Run_a_VSCode_session:"><div class="tree-item-contents heading-link" heading-name="Run a VSCode session:"><span class="tree-item-title">Run a VSCode session:</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>